<!DOCTYPE html>
<html lan="en">
    <head>
        <meta charset="utf-8">
        <title>test loaders</title>
    </head>
    <body>
        <script src="../js/three.js"></script>
        <script src="../js/loaders/GLTFLoader.js"></script>
        <script>
            console.log("this is a test!");
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
            const webglRenderer = new THREE.WebGLRenderer();
            webglRenderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(webglRenderer.domElement);

            const geo = new THREE.CylinderBufferGeometry(5, 10, 10);
            const edgeBox = new THREE.EdgesGeometry(geo)
            const material = new THREE.LineBasicMaterial(
                {
                    color: 0x0f0,
                    lineWidth: 1,
                }
                )
            const line = new THREE.LineSegments(edgeBox, material)

            var lineCloth = null;
            const loader = new THREE.GLTFLoader();
            loader.load('../models/yurongfu.gltf',
                function (gltf){
                    debugger
                    console.log(gltf)
                    gltf.scene.traverse(
                        function(child) {
                            if(child.isMesh) {
                                // child.material = material
                                debugger
                                const edgeCloth = new THREE.EdgesGeometry(child.geometry)
                                lineCloth = new THREE.LineSegments(edgeCloth, material)
                                lineCloth.rotation.x += 90
                                lineCloth.position.x += 0
                                lineCloth.scale.x = 0.2
                                lineCloth.scale.y = 0.2
                                lineCloth.scale.z = 0.2
                                // lineCloth.position.z = 100
                                scene.add(lineCloth)
                            }
                        }
                    )
                }
            )

            scene.add(line);
            camera.position.z = 200;
            
            function animate(time) {
                if(lineCloth) {
                    // lineCloth.rotation.x = time/600
                    lineCloth.rotation.z = time/1200
                    // lineCloth.rotation.z = time/1200
                }
                // line.rotation.x = time/600
                line.rotation.y = time/1200
                line.position.x = -80
                webglRenderer.render(scene, camera);
                requestAnimationFrame(animate);
            }
            animate()
            // (function render(time){
            //     if(lineCloth) {
            //         // lineCloth.rotation.x = time/600
            //         lineCloth.rotation.z = time/1200
            //         // lineCloth.rotation.z = time/1200
            //     }
            //     // line.rotation.x = time/600
            //     line.rotation.y = time/1200
            //     line.position.x = -80
            //     webglRenderer.render(scene, camera);
            //     requestAnimationFrame(render);
            // })()   
        </script>
    </body>
</html>